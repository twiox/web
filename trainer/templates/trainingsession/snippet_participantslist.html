<div>
    <ul>
    {% for participant in object_list %}  
    <li id="{{type}}-participant-{{participant.pk}}">
        {% if participant.user %}
            {{participant.user.first_name}} {{participant.user.last_name}} ({{participant.user.profile.age}}) 
        {% else %}
            {{participant.name}}
        {% endif %}
        <span 
            hx-post="{% url 'trainingsession_del_participant' session.pk %}" 
            hx-vals='{"part_pk":"{{participant.pk}}"}'
            hx-target="closest li"
            hx-swap="delete"
            style="cursor: pointer;">
            <i class="far fa-minus-square" aria-hidden="true"></i>
        </span>
    </li>
    
    {% endfor %}
    </ul>
    {% if type == 'member' %}
    <form
        hx-get="{% url 'trainingsession_search' session.pk %}?type={{type}}"
        hx-target="#{{type}}-search-results"
        hx-trigger="input changed delay:250ms"
    >
        <label class="mdc-text-field">
        <input type="text" class="mdc-text-field__input" name="query" >
        <span class="mdc-floating-label" id="query-label">Mitglieder-Suche</span>
    </label>
    </form>
    {% elif type == 'non-member' %}
    <form
        hx-post="{% url 'trainingsession_nonmember_add' session.pk %}?type={{type}}"
        hx-target="#{{type}}-list"
        hx-trigger="click from:#non-member-submit"
    >   
        <div style="display: flex; gap: 15px; align-items: center;">
            <label class="mdc-text-field">
                <input type="text" class="mdc-text-field__input" name="name" >
                <span class="mdc-floating-label" id="name-label">Name</span>
            </label>
            <div>
                <span id='non-member-submit' style="cursor: pointer; max-width: 100%;" class="form_button">Add</span>
            </div>
        </div>
    </form>
    {% endif %}


<div id="{{type}}-search-results"></div>
</div>

<script>
    document.body.addEventListener('htmx:afterSettle', function (evt) {
    const fields = evt.detail.target.querySelectorAll('.mdc-text-field');
    fields.forEach(field => mdc.textField.MDCTextField.attachTo(field));
});
</script>